<!-- TOC -->

- [1. bollot_navie的缺点](#1-bollot_navie的缺点)
- [2. BlindAuction流程](#2-blindauction流程)

<!-- /TOC -->


# 1. bollot_navie的缺点

* 如果没有投票权的地址调用了vote函数,那么这样的调用也能正常运行
* 投票下标可能会造成数组越界


# 2. BlindAuction流程

bid时需要指定一个bytes32类型的参数blindedBid,并支付一定数目的`以太币`,被记为`deposit`:
* `实际出价金额`
* 本次出价的`真伪`
* 出价者生成的一个`秘钥`

三者取散列生成,这个参数有两个作用:
* 隐含本次出价真伪的信息
* 用以揭晓期验证用户所揭晓的实际出价信息是否可信

注意:
无论本次出价行为是`真`还是`假`,deposit`并不代表实际出价的价格数值`,理论上只要大于实际出价数值即可.


揭晓时,出价者调用时需要指定三个数组:
* 每次出价的实际金额
* 出价行为的真伪
* 对应的秘钥

按照出价的先后顺序,依次揭晓每次出价,求 (value,fake,secret)的散列值是否与先前被记录在合约中的bind.blindedBid相等

```
if 预出价 与 实际出价 hash对上 {
    
    if (无伪造 && 声称出价 >= 实际出价) {
        if (实际出价战胜第一名) {
            1. 这个出价的钱(实际)不马上退
            2. 上一个第一名的钱(钱)放到退钱列表
        } else {
            退钱(deposit)
        }
    } else {
        退钱(deposit)
    }

} else {
    钱(deposit)没了
}


```

